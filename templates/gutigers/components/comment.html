{% load staticfiles %}

{% if base or comment.children|length == 0 %}
  <article class="card p-2 my-1">
    <div class="card-title">
      {% with author=comment.author faction=comment.author.faction %}
        <a href="{% url 'gutigers:user' comment.author.url_slug %}">
          <h5 style="display: inline">{{author.name}}</h5>
        </a>
        <span class="badge bg-secondary ml-2">
          {{faction.team.name}} {{faction.type}}
        </span>
      {% endwith %}
      <span style="color: {{comment.rating_color}}">({{comment.rating}})</span>
    </div>
    <p class="card-body p-0">{{comment.body}}</p>
    <div class="comment-options">
      <img src="{% static 'images/comment/arrow_up.png' %}" alt="Vote up icon"/>
      <img src="{% static 'images/comment/arrow_up.png' %}" alt="Vote down icon"
          style="transform: rotate(180deg)"/>
      <img src="{% static 'images/comment/reply.png' %}" alt="Reply icon"/>
    </div>
  </article>
{% else %}
  <details class="comment-parent">
    <summary>{% include 'gutigers/components/comment.html' with base=True %}</summary>
    <ul>
      {% for child_comment in comment.children %}
        <li>{% include 'gutigers/components/comment.html' with comment=child_comment %}</li>
      {% endfor %}
    </ul>
  </details>
{% endif %}
